---
title: 'ESP8266: Hello World!'
summary: Menjalankan Hello World di ESP8266 pada Serial, Web Server, dan MQTT
publishedAt: 2022-01-09
cover: hello-esp8266.png
---

> Hal besar selalu berawal dari sebuah hello world

Saya akan mencoba untuk menjalankan _hello world_ pada beberapa protokol yang akan sering digunakan dalam pengembangan IoT dengan board ESP8266.

- Serial
- Web Server (_HTTP_, _SSE_, _WebSocket_)
- MQTT

<Text as="p" size={{ '@initial': 'xs', '@sm': 'sm' }} css={{ opacity: 0.5 }}>
  <em>*Saya menggunakan [PlatformIO](https://platformio.org/) di VS Code.</em>
</Text>

## Serial

Serial akan paling sering digunakan, karena ini seperti halnya `console` di Javascript yang sangat berguna untuk tahap development dan debugging.

Bedanya di Serial tidak ada fitur seperti `console.time()` , `console.table()` atau hal _fancy_ javascript lainnya karena di Serial hanya bisa output plain text aja.

Untuk menggukanannya bisa langsung dengan menggunakan:

- `Serial.print()` atau
- `Serial.println()` untuk ouput dengan _line break_

```ino {1-11}
void setup(){
  Serial.begin(74880);

  Serial.println("Hello World!");
}

void main(){
  // print Hello World pada main loop setiap 100ms
  Serial.println("Hello World!");
  delay(100)
}
```

Hal yang perlu diperhatikan adalah bahwa Serial butuh `Serial.begin()` pada block setup dengan parameter `baudrate` berupa angka (samakan dengan settingan IDE).

<Callout type="info">
  Sebagai catatan, pada board berbasis ESP8266 gunakan `74880` pada `baudrate`.
  Hal ini karena ESP8266 menggunakan _baut rate_ tersebut untuk menampilkan
  _debug info_ saat startup. Jika tidak maka IDE akan mengeluarkan karakter
  non-utf-8 atau disebut _gibberish text_.
  [selengkapnya](http://cholla.mmto.org/esp8266/weird_baud/)
</Callout>

## Web Server

Saya menggunakan [ESPAsyncWebServer](https://github.com/me-no-dev/ESPAsyncWebServer) karena library ini menerapkan konsep _asynchronous_, jadi tidak membebani main loop dan juga karena sudah support _SSE_ dan _WebSocket_.

#### Install Library

```diff {7}
// platformio.ini

[env:development]
platform = espressif8266
board = nodemcuv2
framework = arduino
+lib_deps = ottowinter/ESPAsyncWebServer-esphome@^2.1.0
```

```ino {1-3,14-20} showLineNumbers
#include <ESPAsyncWebServer.h>

AsyncWebServer server(80);

void setup() {
    Serial.begin(74880);

    // Connect ke WiFi
    WiFi.mode(WIFI_STA);
    WiFi.begin(WIFI_SSID, WIFI_PASSWORD);
    if (WiFi.waitForConnectResult() != WL_CONNECTED) {
        Serial.printf("WiFi Failed!\n");
        return;
    }

    server.on("/hello", HTTP_GET, [](AsyncWebServerRequest *request) {
        request->send(200, "text/plain", "Hello World!");
    });

    server.begin();
}

void loop() {
    // server tidak berjalan pada main loop
}
```
